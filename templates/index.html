{% extends 'base.html' %}

{% block title %}Steam Store - –ì–æ–ª–æ–≤–Ω–∞{% endblock %}

{% block content %}
<div class="header">
    <h1>üéÆ –ú–∞–≥–∞–∑–∏–Ω —ñ–≥–æ—Ä Steam</h1>
    <p>–ó–Ω–∏–∂–∫–∏ –Ω–∞ –Ω–∞–π–∫—Ä–∞—â—ñ —ñ–≥—Ä–∏</p>
    
    <!-- –§–æ—Ä–º–∞ –ø–æ–ø–æ–≤–Ω–µ–Ω–Ω—è –±–∞–ª–∞–Ω—Å—É -->
    <div class="balance-top-up">
        <form method="POST" action="/add-balance" class="top-up-form">
            <input type="number" name="amount" placeholder="–°—É–º–∞ (‚Ç¥)" min="1" max="10000" required class="top-up-input">
            <button type="submit" class="top-up-button">üí≥ –ü–æ–ø–æ–≤–Ω–∏—Ç–∏ –±–∞–ª–∞–Ω—Å</button>
        </form>
    </div>
</div>

<div class="products-container">
    {% for game in games %}
    <div class="product-card {% if game.id in purchased_ids %}purchased-game{% endif %}">
        <div class="product-image">
            <img src="/static/images/{{ game.image }}" 
                 alt="{{ game.title }}"
                 onerror="this.parentElement.innerHTML='<div class=image-placeholder>üì∑ {{ game.title }}</div>'">
        </div>
        <div class="product-info">
            <h2 class="product-title">{{ game.title }}</h2>
            <p class="product-description">{{ game.description }}</p>
            
            <div class="product-tags">
                {% for tag in game.tags %}
                <span class="tag">{{ tag }}</span>
                {% endfor %}
            </div>
            
            <div class="product-footer">
                <div class="price">
                    {% if game.discount > 0 %}
                    <span class="discount">-{{ game.discount }}%</span>
                    <div class="price-info">
                        <span class="original-price">{{ game.original_price }} ‚Ç¥</span>
                        <span class="current-price">{{ game.current_price }} ‚Ç¥</span>
                    </div>
                    {% elif game.current_price == 0 %}
                    <div class="price-info">
                        <span class="current-price">–ë–µ–∑–∫–æ—à—Ç–æ–≤–Ω–æ</span>
                    </div>
                    {% else %}
                    <div class="price-info">
                        <span class="current-price">{{ game.current_price }} ‚Ç¥</span>
                    </div>
                    {% endif %}
                </div>
                
                {% if game.id in purchased_ids %}
                <button class="buy-button purchased-button" disabled>‚úì –£ –±—ñ–±–ª—ñ–æ—Ç–µ—Ü—ñ</button>
                {% else %}
                <form method="POST" action="/add-to-cart/{{ game.id }}">
                    <button type="submit" class="buy-button">–î–æ–¥–∞—Ç–∏ –≤ –∫–æ—à–∏–∫</button>
                </form>
                {% endif %}
            </div>
        </div>
    </div>
    {% endfor %}
</div>

<!-- –ö–Ω–æ–ø–∫–∞ —Å–∫–∏–¥–∞–Ω–Ω—è (–¥–ª—è —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è) -->
<div class="reset-section">
    <form method="POST" action="/reset" onsubmit="return confirm('–°–∫–∏–Ω—É—Ç–∏ –≤—Å—ñ –¥–∞–Ω—ñ?');">
        <button type="submit" class="reset-button">üîÑ –°–∫–∏–Ω—É—Ç–∏ –¥–∞–Ω—ñ (—Ç–µ—Å—Ç)</button>
    </form>
</div>
{% endblock %}